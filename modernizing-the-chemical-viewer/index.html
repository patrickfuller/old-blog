<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Modernizing the Chemical Viewer</title>
        <meta name="viewport" content="width=device-width">

        <!-- CSS - font, bootstrap, syntax, custom -->
        <link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="/css/bootstrap.css">
        <link rel="stylesheet" href="/css/font-awesome.min.css">
        <link rel="stylesheet" href="/css/syntax.css">
        <link rel="stylesheet" href="/css/main.css">

    </head>
    <body>

        <div class="site">
          <div class="header">
            <h1 class="title"><a href="/">patrick fuller's blog</a></h1>
            <a class="extra" href="/">home</a>
          </div>

          <h2>Modernizing the Chemical Viewer</h2>
<p class="meta">02 Jun 2013</p>

<div class="post">
<p><img src="/img/imolecule.png" alt=""></p>

<p><strong>tl;dr:</strong> <em>Check out <a href="http://patrickfuller.github.io/imolecule/">this program</a>.
If you like source code, <a href="https://github.com/patrickfuller/imolecule">here&#39;s the github repo</a>.</em></p>

<p>I wrote a web-based chemical visualizer and format converter. I did this to help
out experimentally oriented co-workers, and I chose to build it with cutting-edge
tools primarily to stay entertained as I wrote it. That being said, I think I
made something that is somewhat neat and, more importantly, has the potential to
be <em>really</em> neat. In this post, I&#39;m going to explain why this viewer is different
than the hundreds of other chemical programs out there (hint: it&#39;s because it uses
that &quot;cutting edge&quot; part), and then go on to try to convince some of you to go out
and use this as a base to make something awesome. Before doing that, let&#39;s start
at the beginning:</p>

<h2>The State of Chemical Software</h2>

<p>To put it bluntly, most of the end-user chemical software out there is behind a
paywall and/or becoming dated. Programs like <a href="http://www.cambridgesoft.com/Ensemble_for_Chemistry/ChemDraw/">ChemDraw</a>
are on every chemist&#39;s computer, and institutions are paying steep fees for
something that could be replicated over a caffeine-addled weekend. This standard
is so deeply rooted into the field of chemistry that people generally don&#39;t
realize that they have other options.</p>

<p>However, there are some truly amazing open-source chemistry libraries out there.
These projects (ie. <a href="http://openbabel.org/wiki/Main_Page">openbabel</a>, <a href="http://www.rdkit.org/">RDKit</a>)
are very useful to computer savvy people, but are often too complex for experimental
chemists to pick up and use. While I have found some great projects using these
as their back end (ex.Â <a href="http://sourceforge.net/projects/avogadro/">Avogadro</a>),
they are few and far between.</p>

<p>Additionally, the chemical programs out there aren&#39;t poised to take advantage
of the new age of web apps and cloud servers (exception: <a href="http://metamolecular.com/chemwriter/">ChemWriter</a>).
The workflow of the chemist of the future won&#39;t consist of downloading/installing/updating
software and waiting for programs to load. Rather, everything they need will run
right in their browser. This will enable a ton of interesting new capabilities - more
on this later.</p>

<h2>What I Wrote and Why it&#39;s Different</h2>

<p>For the sake of speed, the open-source chemistry libraries out there are written
in a fast compiled language (usually C++). While speed is important, it comes
with trade offs. In the case of code modernization, the standard web stack
(HTML + Javascript) historically has not interfaced easily with a compiled
language. There&#39;s good reason for this: when you navigate to a web site, your
(client) browser does the work of HTML / javascript rendering, which frees up
the server to serve many other clients. However, a compiled language, in its
desire to be close to the machinery of a computer, is stuck on the server.</p>

<p>There is a solution to this issue, which involves setting up something referred
to as a &quot;socket&quot; for auxiliary communication. Historically, this was prohibitively
difficult to do between client-side javascript and a server. Fortunately, things
have changed. (Warning: this is about to get complicated. IF you&#39;re not interested
in code, you can probably skip the rest of this paragraph) Recently, the folks at
the <a href="http://ipython.org/">IPython</a> project spurred the development of
<a href="https://github.com/zeromq/pyzmq">pyzmq</a>, a Python implementation of <a href="http://www.zeromq.org/">zeroMQ</a>,
which is a project that makes sockets <em>much</em> easier to use. It&#39;s great. Also
recently, the HTML5 initiative has defined a protocol for <a href="http://www.websocket.org/">WebSocket</a>,
which allow Javascript programs to open sockets for communication without using a
Flash hack that required root access. There is a messiness involved with handling
these implementations across browsers and operating systems; the answer to this
is <a href="http://socket.io/">socket.io</a>. Finally, there needs to be a proxy to interface
between the zeroMQ socket and the socket.io WebSocket. This &quot;glue&quot; is provided by
<a href="http://www.tornadoweb.org/en/stable/">Tornado</a>, an asynchronous Python web
framework and <a href="https://github.com/MrJoes/tornadio">tornadio</a>, a communicator
between Tornado and socket.io. Combine this all with the Python wrappers available
to the aforementioned chemical libraries, and you have a web-enabled system.</p>

<p><em>I&#39;m going to draw a picture of this at some point. My attempt at doing this
with boxes in powerpoint was plain terrible.</em></p>

<p>Here&#39;s the upshot: not only can we communicate between browser windows and the
server, we can also split computational effort between the client and the server.
While this isn&#39;t good for your typical website-delivering server, this opens up
a world of opportunity for internal servers with small user bases (ie. most
science-oriented groups).</p>

<p>In this vein, my chemical viewer program is a very small sample of what we can
do with this socket connection. In its current state, all file conversion work
is done on the server, and the (client) browser is only responsible for
rendering the output. By dropping a file in the browser, you run code on the
server. Imagine if this server was a high-end computer of the type sitting
around many labs, and say this code had the function to run full MD simulations.
If the output of these simulations was relevant to an experimental chemist,
and the front-end program was designed well, they could run otherwise complex
code on a fast server with the click of a button. You could even expand on
this approach with something like cloud supercomputing!</p>

<h2>In Conclusion</h2>

<p>This program can interface with existing chemical software, and does not require
installation. Right now, I have only interfaced with Open Babel and RDKit, but
this could be expanded to simulation libraries (ie. LAMMPS), linear algebra
packages (ie. numpy), and, you know, everything else. If so motivated, a
computational chemist could literally code himself out of his own job. I like that.</p>

</div>

<!-- Disqus comments -->
<script type="text/javascript">
  var disqus_shortname = 'patrickfuller';
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<!-- MathJax LaTeX editor, with edits from http://stackoverflow.com/questions/10987992/using-mathjax-with-jekyll -->
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/javascript">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
    }
  });
  MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for(i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });
</script>


          <div id="disqus_thread"></div>

          <div class="footer">
            <div class="contact">
              <p>
                <a href="mailto:patrickfuller@gmail.com"><i class="fa fa-envelope"></i></a>
                <a href="https://github.com/patrickfuller"><i class="fa fa-github"></i></a>
              </p>
            </div>
          </div>
        </div>

    <!-- Javascript -->
    <script src="/js/jquery-1.10.2.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
  </body>
</html>
